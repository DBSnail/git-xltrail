skip_branch_with_pr: true

environment:
  matrix:
    - PYTHON: C:\Python36
      PYTHON_VERSION: 3.6.4
      PYTHON_ARCH: 32

    - PYTHON: C:\Python36-x64
      PYTHON_VERSION: 3.6.4
      PYTHON_ARCH: 64

install:
  - set PATH=%PYTHON%;%PYTHON%\\Scripts;%PATH%
  - pip install -r requirements.txt


build_script:
  - pyinstaller --onefile .\git-xltrail-diff.py --name git-xltrail-diff-x%PYTHON_ARCH%.exe --version-file .\scripts\windows\git-xltrail-version-info.py --icon .\scripts\windows\git-xltrail-logo.ico

# after_build:
#   - iscc script\windows-installer\inno-setup-git-lfs-installer.iss

# test_script:
#   - bash --login script/cibuild

# artifacts:
#   - path: git-xltrail-x86.exe
#   - path: git-xltrail-x64.exe
#   - path: git-lfs-windows-*.exe

# on_finish:
#   - ps: $blockRdp = $true; iex ((new-object net.webclient).DownloadString('https://raw.githubusercontent.com/appveyor/ci/master/scripts/enable-rdp.ps1'))